var ue=Object.defineProperty;var me=(e,t)=>{for(var n in t)ue(e,n,{get:t[n],enumerable:!0})};import*as D from"node:module";import{pathToFileURL as Ze}from"node:url";var W={};me(W,{DEBUG:()=>de});var de=pe(process.env.DEBUG);function pe(e){if(e===void 0)return!1;if(e==="true"||e==="1")return!0;if(e==="false"||e==="0")return!1;if(e==="*")return!0;let t=e.split(",").map(n=>n.split(":")[0]);return t.includes("-tailwindcss")?!1:!!t.includes("tailwindcss")}import y from"enhanced-resolve";import{createJiti as ze}from"jiti";import M from"node:fs";import ae from"node:fs/promises";import F,{dirname as ne}from"node:path";import{pathToFileURL as se}from"node:url";import{__unstable__loadDesignSystem as Ge,compile as Ke,Features as Je}from"tailwindcss";import P from"node:fs/promises";import A from"node:path";var ge=[/import[\s\S]*?['"](.{3,}?)['"]/gi,/import[\s\S]*from[\s\S]*?['"](.{3,}?)['"]/gi,/export[\s\S]*from[\s\S]*?['"](.{3,}?)['"]/gi,/require\(['"`](.+)['"`]\)/gi],he=[".js",".cjs",".mjs"],xe=["",".js",".cjs",".mjs",".ts",".cts",".mts",".jsx",".tsx"],ye=["",".ts",".cts",".mts",".tsx",".js",".cjs",".mjs",".jsx"];async function Ae(e,t){for(let n of t){let o=`${e}${n}`;if((await P.stat(o).catch(()=>null))?.isFile())return o}for(let n of t){let o=`${e}/index${n}`;if(await P.access(o).then(()=>!0,()=>!1))return o}return null}async function B(e,t,n,o){let r=he.includes(o)?xe:ye,i=await Ae(A.resolve(n,t),r);if(i===null||e.has(i))return;e.add(i),n=A.dirname(i),o=A.extname(i);let s=await P.readFile(i,"utf-8"),c=[];for(let a of ge)for(let l of s.matchAll(a))l[1].startsWith(".")&&c.push(B(e,l[1],n,o));await Promise.all(c)}async function z(e){let t=new Set;return await B(t,e,A.dirname(e),A.extname(e)),Array.from(t)}import*as I from"node:path";var R=92,v=47,E=42,Re=34,we=39,Ce=58,_=59,h=10,w=32,k=9,G=123,U=125,b=40,K=41,Se=91,ve=93,J=45,T=64,Ee=33;function H(e){e=e.replaceAll(`\r
`,`
`);let t=[],n=[],o=[],r=null,i=null,s="",c="",a;for(let l=0;l<e.length;l++){let f=e.charCodeAt(l);if(f===R)s+=e.slice(l,l+2),l+=1;else if(f===v&&e.charCodeAt(l+1)===E){let u=l;for(let d=l+2;d<e.length;d++)if(a=e.charCodeAt(d),a===R)d+=1;else if(a===E&&e.charCodeAt(d+1)===v){l=d+1;break}let m=e.slice(u,l+1);m.charCodeAt(2)===Ee&&n.push(Q(m.slice(2,-2)))}else if(f===we||f===Re){let u=l;for(let m=l+1;m<e.length;m++)if(a=e.charCodeAt(m),a===R)m+=1;else if(a===f){l=m;break}else{if(a===_&&e.charCodeAt(m+1)===h)throw new Error(`Unterminated string: ${e.slice(u,m+1)+String.fromCharCode(f)}`);if(a===h)throw new Error(`Unterminated string: ${e.slice(u,m)+String.fromCharCode(f)}`)}s+=e.slice(u,l+1)}else{if((f===w||f===h||f===k)&&(a=e.charCodeAt(l+1))&&(a===w||a===h||a===k))continue;if(f===h){if(s.length===0)continue;a=s.charCodeAt(s.length-1),a!==w&&a!==h&&a!==k&&(s+=" ")}else if(f===J&&e.charCodeAt(l+1)===J&&s.length===0){let u="",m=l,d=-1;for(let p=l+2;p<e.length;p++)if(a=e.charCodeAt(p),a===R)p+=1;else if(a===v&&e.charCodeAt(p+1)===E){for(let g=p+2;g<e.length;g++)if(a=e.charCodeAt(g),a===R)g+=1;else if(a===E&&e.charCodeAt(g+1)===v){p=g+1;break}}else if(d===-1&&a===Ce)d=s.length+p-m;else if(a===_&&u.length===0){s+=e.slice(m,p),l=p;break}else if(a===b)u+=")";else if(a===Se)u+="]";else if(a===G)u+="}";else if((a===U||e.length-1===p)&&u.length===0){l=p-1,s+=e.slice(m,p);break}else(a===K||a===ve||a===U)&&u.length>0&&e[p]===u[u.length-1]&&(u=u.slice(0,-1));let x=q(s,d);r?r.nodes.push(x):t.push(x),s=""}else if(f===_&&s.charCodeAt(0)===T)i=C(s),r?r.nodes.push(i):t.push(i),s="",i=null;else if(f===_&&c[c.length-1]!==")"){let u=q(s);r?r.nodes.push(u):t.push(u),s=""}else if(f===G&&c[c.length-1]!==")")c+="}",i=N(s.trim()),r&&r.nodes.push(i),o.push(r),r=i,s="",i=null;else if(f===U&&c[c.length-1]!==")"){if(c==="")throw new Error("Missing opening {");if(c=c.slice(0,-1),s.length>0)if(s.charCodeAt(0)===T)i=C(s),r?r.nodes.push(i):t.push(i),s="",i=null;else{let m=s.indexOf(":");if(r){let d=s.indexOf("!important",m+1);r.nodes.push({kind:"declaration",property:s.slice(0,m).trim(),value:s.slice(m+1,d===-1?s.length:d).trim(),important:d!==-1})}}let u=o.pop()??null;u===null&&r&&t.push(r),r=u,s="",i=null}else if(f===b)c+=")",s+="(";else if(f===K){if(c[c.length-1]!==")")throw new Error("Missing opening (");c=c.slice(0,-1),s+=")"}else{if(s.length===0&&(f===w||f===h||f===k))continue;s+=String.fromCharCode(f)}}}if(s.charCodeAt(0)===T&&t.push(C(s)),c.length>0&&r){if(r.kind==="rule")throw new Error(`Missing closing } at ${r.selector}`);if(r.kind==="at-rule")throw new Error(`Missing closing } at ${r.name} ${r.params}`)}return n.length>0?n.concat(t):t}function C(e,t=[]){for(let n=5;n<e.length;n++){let o=e.charCodeAt(n);if(o===w||o===b){let r=e.slice(0,n).trim(),i=e.slice(n).trim();return S(r,i,t)}}return S(e.trim(),"",t)}function q(e,t=e.indexOf(":")){let n=e.indexOf("!important",t+1);return{kind:"declaration",property:e.slice(0,t).trim(),value:e.slice(t+1,n===-1?e.length:n).trim(),important:n!==-1}}var _e=64;function ke(e,t=[]){return{kind:"rule",selector:e,nodes:t}}function S(e,t="",n=[]){return{kind:"at-rule",name:e,params:t,nodes:n}}function N(e,t=[]){return e.charCodeAt(0)===_e?C(e,t):ke(e,t)}function Y(e,t){return{kind:"declaration",property:e,value:t,important:!1}}function Q(e){return{kind:"comment",value:e}}function $(e,t,n=[],o={}){for(let r=0;r<e.length;r++){let i=e[r],s=[...n,i],c=n.at(-1)??null;if(i.kind==="context"){if($(i.nodes,t,n,{...o,...i.context})===2)return 2;continue}let a=t(i,{parent:c,context:o,path:s,replaceWith(l){e.splice(r,1,...Array.isArray(l)?l:[l]),r--}})??0;if(a===2)return 2;if(a!==1&&(i.kind==="rule"||i.kind==="at-rule")&&$(i.nodes,t,s,o)===2)return 2}}function X(e){let t="",n=new Set,o=[],r=[];function i(l,f=0){let u="",m="  ".repeat(f);if(l.kind==="rule"){u+=`${m}${l.selector} {
`;for(let d of l.nodes)u+=i(d,f+1);u+=`${m}}
`}else if(l.kind==="at-rule"){if(l.nodes.length===0)return`${m}${l.name} ${l.params};
`;if(l.name==="@property"&&f===0){if(n.has(l.params))return"";let d=l.params,x=null,p=!1;for(let g of l.nodes)g.kind==="declaration"&&(g.property==="initial-value"?x=g.value:g.property==="inherits"&&(p=g.value==="true"));p?o.push(Y(d,x??"initial")):r.push(Y(d,x??"initial")),n.add(l.params)}u+=`${m}${l.name}${l.params?` ${l.params} `:" "}{
`;for(let d of l.nodes)u+=i(d,f+1);u+=`${m}}
`}else if(l.kind==="comment")u+=`${m}/*${l.value}*/
`;else if(l.kind==="context")for(let d of l.nodes)u+=i(d,f);else if(l.kind==="at-root"){for(let d of l.nodes)t+=i(d,0);return u}else l.property!=="--tw-sort"&&l.value!==void 0&&l.value!==null&&(u+=`${m}${l.property}: ${l.value}${l.important?" !important":""};
`);return u}let s="";for(let l of e){let f=i(l);f!==""&&(s+=f)}let c=[];o.length&&c.push(N(":root",o)),r.length&&c.push(N("*, ::before, ::after, ::backdrop",r));let a="";return c.length&&(a=i(S("@supports","(-moz-orient: inline)",[S("@layer","base",c)]))),`${s}${a}${t}`}function Ne(e,t){if(typeof e!="string")throw new TypeError("expected path to be a string");if(e==="\\"||e==="/")return"/";var n=e.length;if(n<=1)return e;var o="";if(n>4&&e[3]==="\\"){var r=e[2];(r==="?"||r===".")&&e.slice(0,2)==="\\\\"&&(e=e.slice(2),o="//")}var i=e.split(/[/\\]+/);return t!==!1&&i[i.length-1]===""&&i.pop(),o+i.join("/")}function j(e){let t=Ne(e);return e.startsWith("\\\\")&&t.startsWith("/")&&!t.startsWith("//")?`/${t}`:t}var O=/(?<!@import\s+)(?<=^|[^\w\-\u0080-\uffff])url\((\s*('[^']+'|"[^"]+")\s*|[^'")]+)\)/,V=/(?<=image-set\()((?:[\w-]{1,256}\([^)]*\)|[^)])*)(?=\))/,$e=/(?:gradient|element|cross-fade|image)\(/,De=/^\s*data:/i,Pe=/^([a-z]+:)?\/\//,Ue=/^[A-Z_][.\w-]*\(/i,Te=/(?:^|\s)(?<url>[\w-]+\([^)]*\)|"[^"]*"|'[^']*'|[^,]\S*[^,])\s*(?:\s(?<descriptor>\w[^,]+))?(?:,|$)/g,be=/(?<!\\)"/g,je=/(?: |\\t|\\n|\\f|\\r)+/g,Ie=e=>De.test(e),Oe=e=>Pe.test(e);async function Z({css:e,base:t,root:n}){if(!e.includes("url(")&&!e.includes("image-set("))return e;let o=H(e),r=[];function i(s){let c=I.posix.join(j(t),s),a=I.posix.relative(j(n),c);return a.startsWith(".")||(a="./"+a),a}return $(o,s=>{if(s.kind!=="declaration"||!s.value)return;let c=O.test(s.value),a=V.test(s.value);if(c||a){let l=a?Fe:ee;r.push(l(s.value,i).then(f=>{s.value=f}))}}),r.length&&await Promise.all(r),X(o)}function ee(e,t){return re(e,O,async n=>{let[o,r]=n;return await te(r.trim(),o,t)})}async function Fe(e,t){return await re(e,V,async n=>{let[,o]=n;return await Me(o,async({url:i})=>O.test(i)?await ee(i,t):$e.test(i)?i:await te(i,i,t))})}async function te(e,t,n,o="url"){let r="",i=e[0];if((i==='"'||i==="'")&&(r=i,e=e.slice(1,-1)),Le(e))return t;let s=await n(e);return r===""&&s!==encodeURI(s)&&(r='"'),r==="'"&&s.includes("'")&&(r='"'),r==='"'&&s.includes('"')&&(s=s.replace(be,'\\"')),`${o}(${r}${s}${r})`}function Le(e){return Oe(e)||Ie(e)||e[0]==="#"||Ue.test(e)}function Me(e,t){return Promise.all(We(e).map(async({url:n,descriptor:o})=>({url:await t({url:n,descriptor:o}),descriptor:o}))).then(Be)}function We(e){let t=e.trim().replace(je," ").replace(/\r?\n/,"").replace(/,\s+/,", ").replaceAll(/\s+/g," ").matchAll(Te);return Array.from(t,({groups:n})=>({url:n?.url?.trim()??"",descriptor:n?.descriptor?.trim()??""})).filter(({url:n})=>!!n)}function Be(e){return e.map(({url:t,descriptor:n})=>t+(n?` ${n}`:"")).join(", ")}async function re(e,t,n){let o,r=e,i="";for(;o=t.exec(r);)i+=r.slice(0,o.index),i+=await n(o),r=r.slice(o.index+o[0].length);return i+=r,i}async function qe(e,{base:t,onDependency:n,shouldRewriteUrls:o,customCssResolver:r,customJsResolver:i}){let s=await Ke(e,{base:t,async loadModule(c,a){return ce(c,a,n,i)},async loadStylesheet(c,a){let l=await fe(c,a,n,r);return o&&(l.content=await Z({css:l.content,root:a,base:l.base})),l}});if(s.root&&s.root!=="none"){let c=/[*{]/,a=[];for(let f of s.root.pattern.split("/")){if(c.test(f))break;a.push(f)}if(!await ae.stat(F.resolve(t,a.join("/"))).then(f=>f.isDirectory()).catch(()=>!1))throw new Error(`The \`source(${s.root.pattern})\` does not exist`)}return s}async function He(e,{base:t}){return Ge(e,{base:t,async loadModule(n,o){return ce(n,o,()=>{})},async loadStylesheet(n,o){return fe(n,o,()=>{})}})}async function ce(e,t,n,o){if(e[0]!=="."){let c=await le(e,t,o);if(!c)throw new Error(`Could not resolve '${e}' from '${t}'`);let a=await oe(se(c).href);return{base:ne(c),module:a.default??a}}let r=await le(e,t,o);if(!r)throw new Error(`Could not resolve '${e}' from '${t}'`);let[i,s]=await Promise.all([oe(se(r).href+"?id="+Date.now()),z(r)]);for(let c of s)n(c);return{base:ne(r),module:i.default??i}}async function fe(e,t,n,o){let r=await Ye(e,t,o);if(!r)throw new Error(`Could not resolve '${e}' from '${t}'`);if(n(r),typeof globalThis.__tw_readFile=="function"){let s=await globalThis.__tw_readFile(r,"utf-8");if(s)return{base:F.dirname(r),content:s}}let i=await ae.readFile(r,"utf-8");return{base:F.dirname(r),content:i}}var ie=null;async function oe(e){if(typeof globalThis.__tw_load=="function"){let t=await globalThis.__tw_load(e);if(t)return t}try{return await import(e)}catch{return ie??=ze(import.meta.url,{moduleCache:!1,fsCache:!1}),await ie.import(e)}}var Qe=y.ResolverFactory.createResolver({fileSystem:new y.CachedInputFileSystem(M,4e3),useSyncFileSystemCalls:!0,extensions:[".css"],mainFields:["style"],conditionNames:["style"]});async function Ye(e,t,n){if(typeof globalThis.__tw_resolve=="function"){let o=globalThis.__tw_resolve(e,t);if(o)return Promise.resolve(o)}if(n){let o=await n(e,t);if(o)return o}return L(Qe,e,t)}var Xe=y.ResolverFactory.createResolver({fileSystem:new y.CachedInputFileSystem(M,4e3),useSyncFileSystemCalls:!0,extensions:[".js",".json",".node",".ts"],conditionNames:["node","import"]}),Ve=y.ResolverFactory.createResolver({fileSystem:new y.CachedInputFileSystem(M,4e3),useSyncFileSystemCalls:!0,extensions:[".js",".json",".node",".ts"],conditionNames:["node","require"]});async function le(e,t,n){if(typeof globalThis.__tw_resolve=="function"){let o=globalThis.__tw_resolve(e,t);if(o)return Promise.resolve(o)}if(n){let o=await n(e,t);if(o)return o}return L(Xe,e,t).catch(()=>L(Ve,e,t))}function L(e,t,n){return new Promise((o,r)=>e.resolve({},n,t,{},(i,s)=>{if(i)return r(i);o(s)}))}if(!process.versions.bun){let e=D.createRequire(import.meta.url);D.register?.(Ze(e.resolve("@tailwindcss/node/esm-cache-loader")))}export{Je as Features,He as __unstable__loadDesignSystem,qe as compile,W as env,j as normalizePath};
